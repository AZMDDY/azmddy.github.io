(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{512:function(s,e,a){"use strict";a.r(e);var n=a(22),t=Object(n.a)({},(function(){var s=this,e=s.$createElement,a=s._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"cmake-day-6-安装规则-install-rules"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#cmake-day-6-安装规则-install-rules"}},[s._v("#")]),s._v(" CMake Day 6 —— 安装规则(install rules)")]),s._v(" "),a("p",[s._v("在 CMake 中，安装是指将二进制文件、库文件和头文件等安装到指定目录中。")]),s._v(" "),a("p",[s._v("语法：")]),s._v(" "),a("div",{staticClass:"language-CMakeLists.txt line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("install(TARGETS <target>... [...])\ninstall({FILES | PROGRAMS} <file>... [...])\ninstall(DIRECTORY <dir>... [...])\ninstall(SCRIPT <file> [...])\ninstall(CODE <code> [...])\ninstall(EXPORT <export-name> [...])\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("p",[s._v("该命令是为项目配置安装规则。在项目中会按照 install()命令调用的顺序执行按照规则。")]),s._v(" "),a("p",[s._v("首先解释几个选项：")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("DESTINATION")]),s._v("：指定要安装到的目录，如果是相对路径，则是相对于"),a("code",[s._v("CMAKE_INSTALL_PREFIX")]),s._v("变量的，如果是绝对路径，则直接使用，由于 cpack 的安装程序生成器不支持绝对路径，所有最好使用相对路径。")]),s._v(" "),a("li",[a("code",[s._v("PERMISSIONS")]),s._v(": 指定安装文件的权限，有效权限有"),a("code",[s._v("OWNER_READ")]),s._v("，"),a("code",[s._v("OWNER_WRITE")]),s._v("，"),a("code",[s._v("OWNER_EXECUTE")]),s._v("，"),a("code",[s._v("GROUP_READ")]),s._v("，"),a("code",[s._v("GROUP_WRITE")]),s._v("，"),a("code",[s._v("GROUP_EXECUTE")]),s._v("，"),a("code",[s._v("WORLD_READ")]),s._v("，"),a("code",[s._v("WORLD_WRITE")]),s._v("，"),a("code",[s._v("WORLD_EXECUTE")]),s._v("，"),a("code",[s._v("SETUID")]),s._v("和"),a("code",[s._v("SETGID")]),s._v("。在某些平台上没有意义的权限将被忽略。")]),s._v(" "),a("li",[a("code",[s._v("CONFIGURATIONS")]),s._v(": 指定安装规则适用的构建配置(Debug, Relase 等)，如果要为 Debug 和 Relase 单独配置安装路径，如下：")])]),s._v(" "),a("div",{staticClass:"language-CMakeLists.txt line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("install(TARGETS target\n        CONFIGURATIONS Debug\n        RUNTIME DESTINATION Debug/bin)\ninstall(TARGETS target\n        CONFIGURATIONS Release\n        RUNTIME DESTINATION Release/bin)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("ul",[a("li",[a("code",[s._v("EXCLUDE_FROM_ALL")]),s._v(": 指定该文件从完整安装中排除。")]),s._v(" "),a("li",[a("code",[s._v("RENAME")]),s._v(": 指定已安装文件的名称，该名称可能与原始文件不同。仅当命令安装了单个文件时，才允许重命名.")])]),s._v(" "),a("h2",{attrs:{id:"安装二进制文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装二进制文件"}},[s._v("#")]),s._v(" 安装二进制文件")]),s._v(" "),a("p",[s._v("语法：")]),s._v(" "),a("div",{staticClass:"language-CMakeLists.txt line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("install(TARGETS targets... [EXPORT <export-name>]\n        [[ARCHIVE|LIBRARY|RUNTIME|OBJECTS|FRAMEWORK|BUNDLE|\n          PRIVATE_HEADER|PUBLIC_HEADER|RESOURCE]\n         [DESTINATION <dir>]\n         [PERMISSIONS permissions...]\n         [CONFIGURATIONS [Debug|Release|...]]\n         [COMPONENT <component>]\n         [NAMELINK_COMPONENT <component>]\n         [OPTIONAL] [EXCLUDE_FROM_ALL]\n         [NAMELINK_ONLY|NAMELINK_SKIP]\n        ] [...]\n        [INCLUDES DESTINATION [<dir> ...]]\n        )\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("p",[s._v("常用参数：")]),s._v(" "),a("ul",[a("li",[a("code",[s._v("ARCHIVE")]),s._v(": 静态库")]),s._v(" "),a("li",[a("code",[s._v("LIBRARY")]),s._v(": 动态库")]),s._v(" "),a("li",[a("code",[s._v("RUNTIME")]),s._v(": 可执行文件")])]),s._v(" "),a("p",[s._v("如果没有指定下列目录的路径，则使用内置的默认值：")]),s._v(" "),a("table",[a("thead",[a("tr",[a("th",[s._v("Target")]),s._v(" "),a("th",[s._v("Variable")]),s._v(" "),a("th",[s._v("Built-In Default")])])]),s._v(" "),a("tbody",[a("tr",[a("td",[s._v("RUNTIME")]),s._v(" "),a("td",[s._v("${CMAKE_INSTALL_BINDIR}")]),s._v(" "),a("td",[s._v("bin")])]),s._v(" "),a("tr",[a("td",[s._v("LIBRARY")]),s._v(" "),a("td",[s._v("${CMAKE_INSTALL_LIBDIR}")]),s._v(" "),a("td",[s._v("lib")])]),s._v(" "),a("tr",[a("td",[s._v("ARCHIVE")]),s._v(" "),a("td",[s._v("${CMAKE_INSTALL_LIBDIR}")]),s._v(" "),a("td",[s._v("lib")])]),s._v(" "),a("tr",[a("td",[s._v("PRIVATE_HEADER")]),s._v(" "),a("td",[s._v("${CMAKE_INSTALL_INCLUDEDIR}")]),s._v(" "),a("td",[s._v("include")])]),s._v(" "),a("tr",[a("td",[s._v("PUBLIC_HEADER")]),s._v(" "),a("td",[s._v("${CMAKE_INSTALL_INCLUDEDIR}")]),s._v(" "),a("td",[s._v("include")])])])]),s._v(" "),a("h2",{attrs:{id:"安装文件和目录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#安装文件和目录"}},[s._v("#")]),s._v(" 安装文件和目录")]),s._v(" "),a("p",[s._v("语法：")]),s._v(" "),a("div",{staticClass:"language-CMakeLists.txt line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("install(<FILES|PROGRAMS> files...\n        TYPE <type> | DESTINATION <dir>\n        [PERMISSIONS permissions...]\n        [CONFIGURATIONS [Debug|Release|...]]\n        [COMPONENT <component>]\n        [RENAME <name>] [OPTIONAL] [EXCLUDE_FROM_ALL])\n\ninstall(DIRECTORY dirs...\n        TYPE <type> | DESTINATION <dir>\n        [FILE_PERMISSIONS permissions...]\n        [DIRECTORY_PERMISSIONS permissions...]\n        [USE_SOURCE_PERMISSIONS] [OPTIONAL] [MESSAGE_NEVER]\n        [CONFIGURATIONS [Debug|Release|...]]\n        [COMPONENT <component>] [EXCLUDE_FROM_ALL]\n        [FILES_MATCHING]\n        [[PATTERN <pattern> | REGEX <regex>]\n         [EXCLUDE] [PERMISSIONS permissions...]] [...])\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("p",[s._v("当通过命令行使用"),a("code",[s._v("cmake --install .")]),s._v("或者"),a("code",[s._v("make install")]),s._v("时，将会运行安装步骤。如果要指定安装的根目录，需要使用"),a("code",[s._v('cmake --install --prefix "/home/user/installdir" .')]),s._v("来指定。")])])}),[],!1,null,null,null);e.default=t.exports}}]);