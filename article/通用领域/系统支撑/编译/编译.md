---
sort: 2
---

# 编译

> 编译过程就是把预处理完的文件进行一系列的词法分析、语法分析、语义分析及优化后生成相应的汇编代码文件。



```cpp
// hello.cpp

#define MAX_LEN 10

#pragma pack(1)
struct Data {
    int len;
    char msg[0];
};
#pragma pack()


int main(int argc, char** argv)
{
    int a = MAX_LEN;
    return 0;
}
```

编译过程的命令如下：

```shell
g++ -S hello.i -o hello.s
# 或
g++ -S hello.cpp -o hello.s
```

结果如下：

![image-20220227154843779](https://raw.githubusercontent.com/AZMDDY/imgs/master/img/image-20220227154843779.png)



在C++中编译器只会编译源文件，每个源文件都是一个编译单元。编译器不能跨目标文件或编译单元检测名称冲突，这是链接器的工作。